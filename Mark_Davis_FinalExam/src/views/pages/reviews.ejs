
<%- include('../partials/header'); -%>

<body>
  <%- include('../partials/menu'); -%>
  <div class="container-fluid justify-content-center" style="padding: 1%; ">
    <div class="row justify-content-center"><h2>TV show reviews</h2></div>
    <div class="row justify-content-center">
      <div class="rounded-pill col-9">
        <form action="/filter" method="POST"> <!-- where to send the data entered into search bar -->
          <div id="roundcorners" class="input-group">
            <input type="filter" name="filter" placeholder="Filter results by search term" aria-describedby="filter_button" class="form-control rounded-pill bg-none border border-dark mx-3">
            <button id="filterbtn" type="submit" class="btn btn-outline-dark btn-primary text-light" style="width: 100px;">Filter</button>
          </div>
        </form>
      </div>
    </div>
    <div class="container justify-content-center" style="padding-top: 1%; padding-bottom: 1%;">
      <% if (error) { %>
        <div class="alert alert-danger justify-content-center"><%- message %></div>
      <% } %>
      <% if (items) {%>
        <table class="table table-bordered" >
          <thead>
            <tr class="">
              <th><h6><strong>TV show</strong></h6></th>
              <th><h6><strong>Review</strong></h6></th>
              <th><h6><strong>Review Date</strong></h6></th>
            </tr>
          </thead>
          <tbody>
      <% if (items){
        var display = '';
        items.forEach(function(item){
        console.log(item.tv_show)
        display += `<tr>
          <td class="px-2" width="15%"><h6><strong>${item.tv_show}</strong></h6></td>
          <td class="px-2">${item.review}</td>
          <td class="px-2" width="25%">${item.review_date}</td>
        </tr>`;
      }); display += '</tbody>';
      }; %>
      <%- display %>
      </table>
    <% }; %>
    </div>
  </div>
</body>

<%- include('../partials/footer'); -%>
